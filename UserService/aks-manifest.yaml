apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
spec:
  replicas: 1
  selector:
    matchLabels:
      app: user-service
  template:
    metadata:
      labels:
        app: user-service
    spec:
      nodeSelector:
        "kubernetes.io/os": linux
      containers:
        - name: user-service
          image: galethus/user-service:latest
          ports:
            - containerPort: 443
              name: user-service
          resources:
            requests:
              cpu: 1m
              memory: 200Mi
            limits:
              cpu: 1000m
              memory: 512Mi
          volumeMounts:
            - name: tls-secret
              mountPath: /etc/tls
              readOnly: true
      volumes:
        - name: tls-secret
          secret:
            secretName: tls-secret

---
apiVersion: v1
kind: Service
metadata:
  name: user-service
spec:
  ports:
    - port: 443
      targetPort: 443
  selector:
    app: user-service

---
apiVersion: v1
kind: Secret
metadata:
  name: tls-secret
type: kubernetes.io/tls
data:
  tls.pfx: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZWekNDQXorZ0F3SUJBZ0lVVGRZRUFDNjdxNlFDbGx2NzJ0dDlWM1dBYlhRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd096RTVNRGNHQTFVRUF3d3dZWEpyWVdSbExXRndhUzVuWlhKdFlXNTVkMlZ6ZEdObGJuUnlZV3d1WTJ4dgpkV1JoY0hBdVlYcDFjbVV1WTI5dE1CNFhEVEkwTURZeU1URXpOVEl4T1ZvWERUSTFNRFl5TVRFek5USXhPVm93Ck96RTVNRGNHQTFVRUF3d3dZWEpyWVdSbExXRndhUzVuWlhKdFlXNTVkMlZ6ZEdObGJuUnlZV3d1WTJ4dmRXUmgKY0hBdVlYcDFjbVV1WTI5dE1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBTUlJQ0NnS0NBZ0VBalVWOQppK2dqZzByZEZXcU1EVnA3N2x4NmZab05paVcrN0pvQzZIOHYwU1hDZlBZUmp1L2ZkbVFycTlmY2QxZTQ0dzBYCkFKYW10K0dWYnFYQVVOT25YM25GUGpnWkxzUEZ6ZkgzM3B4VUFUSENaR1EyZlViN3RTSG1tYVdtMGpyMGFtV0UKSVRNVFlzSTcxeFVIYTZaeGloQzJsU0QyS08ySkRValY5RmtBbmdQU2Y5ZThTYlhEL0dIMkJmVElVaDFhVXMvcQoyc0VtWG9sNUlERnVPYTlaQ0xBd3M2NkVZUmc5cWZQL2J3WFF3NXUvT1JJK1ZnQmhrYit2bm1rRnpHL2ZRcXJiClpuWWRGRGdHbFVwNGlRcjdoS0Y1WklodGoyN3VIM2FnSUdnbW9aU3Vnbmk3SGVXVmxWeFRvRnNVVGJMSmZISWIKcy9Lc3lXR1ZyMTUrQUU2VG9QaVI0TlFmaHVwbGRjclpRN084dmsvK0tMK042VlhOeklJVlhLZGt5ZFFSbVFxVQpwQ1FKMUpNSUc2ditEZk1rS3EvbGExOUVQOFlFMm1EWGZuMHRqSUtDdDB4OXlQMENNUGd0SDM4YWxhVFRJWlhoCnc2Nm40NEFHMGl0ZVpqN1VNcDhFWjkrUmtlbjFyRmdwVUZjZVpKQk9ReitucE41VXgzN3h1eGNhMGNRa2w1WFUKV3cyaXVzR0htL3VIWFZGdjU1d01OMnk5U3VvZkpvdVZOTjR5Q1Y1djJtMkxnaEQxWXY5d21pVlhHcm12R21teQphSkNkVFdhbXpXd3I5TmhaY1I2U1VCdnZUaExrVk4rNXpoT0xpdGhBVUFxTEl0UStVdjZGMnBqRmtUS3VVdnpHCml2N3ZMajc0cDQ5cFhqY0s5NGZKRGdtN3ZQeGtnU1Y4RzNBYUxNY0NBd0VBQWFOVE1GRXdIUVlEVlIwT0JCWUUKRkZ5OVIxaFFUbDZJSUlPK29tbVVtU1UvM3RVQ01COEdBMVVkSXdRWU1CYUFGRnk5UjFoUVRsNklJSU8rb21tVQptU1UvM3RVQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dJQkFEa2JmNkJMCkd6amVseXZZMFZ6bVRRWTFIUjViejY0ZXAyRWJKRzBtL05FdWZ0VnQvSGRiMnAzZHNVMi9rWldlc2Y2ZDVrRjIKSGFMajlPQko5b0pIVHdoeE52V2d1ZFJvVnV6dVZCMllDSWp5QjNpTE5QejdoVkFqZzFRQXEvZWVEZTdqMGdwOQppL1lsT21lc2xPZzBHVlhob1lnNzkydnJEQ3VkRmFoN2VQY1ljanVxZHNYTlgvTktXc0hrT2dvSVVIbWxBOSs5Cno5dkQ4TUR4RCt4NEtzVURCVWQwUHNsQ1A5V24vMFMzcitjZ0lPSkFJVmhLMFI5TWZTL1FzYWplKzQzZFIyYVoKTmcxMGxoTHhsVVpFamFSVVFHWVFhYms1SFQrOUo0UG93b1ppMHhXR01Ta2Q3MzVXazZkeS94MnJSWnhCNXAzcwpWZkMzVXJSeUFCNGdyOUNqZ0hpRzNyckp6K0ppdnVyL2pWQXlHV0tPL2FxRlZqSGRPVWRnZmFZSVlkVTJFRTJRCmgxM2tncmNWclVtUHZlT1czV0tsT3lVNGFyMWVxTkF1MkdISkpzN2w2SHhyREJ6K1BILzhINHlOYkNBNWJHbloKTHh1S1NwN0hjRU5WcjV4aDBUa240TDVpSWpZSENEcnl3OTdoZVFFcFg2MUdPbmNkWGVxbDRCdGZsY1JPL0RTLwpRbjBRa2NSdmJhVWtNdkxPMmlHN3dxQzJKWUVpMGVkNHFJbjNSYUYyV3ZtQnR1Mmt2VE9jQzRkbUlRUWdDdllhCldXRjNBWDA1SXdxZmRnK0J4bWRvYjV2MEIyd0tYSHdxYjhBcXRVd1kvQXJIOHBOZXdvYUU1YyswcGw5L1JKcTIKNDdoZnNMN0YxMzNtZlUwbytXUFR3Z2tvM0RXSHhVVGhiK0dMCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  pass: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRQ05SWDJMNkNPRFN0MFYKYW93TldudnVYSHA5bWcyS0piN3NtZ0xvZnkvUkpjSjg5aEdPNzk5MlpDdXIxOXgzVjdqakRSY0FscWEzNFpWdQpwY0JRMDZkZmVjVStPQmt1dzhYTjhmZmVuRlFCTWNKa1pEWjlSdnUxSWVhWnBhYlNPdlJxWllRaE14Tml3anZYCkZRZHJwbkdLRUxhVklQWW83WWtOU05YMFdRQ2VBOUovMTd4SnRjUDhZZllGOU1oU0hWcFN6K3Jhd1NaZWlYa2cKTVc0NXIxa0lzREN6cm9SaEdEMnA4Lzl2QmRERG03ODVFajVXQUdHUnY2K2VhUVhNYjk5Q3F0dG1kaDBVT0FhVgpTbmlKQ3Z1RW9YbGtpRzJQYnU0ZmRxQWdhQ2FobEs2Q2VMc2Q1WldWWEZPZ1d4Uk5zc2w4Y2h1ejhxekpZWld2ClhuNEFUcE9nK0pIZzFCK0c2bVYxeXRsRHM3eStULzRvdjQzcFZjM01naFZjcDJUSjFCR1pDcFNrSkFuVWt3Z2IKcS80Tjh5UXFyK1ZyWDBRL3hnVGFZTmQrZlMyTWdvSzNUSDNJL1FJdytDMGZmeHFWcE5NaGxlSERycWZqZ0FiUwpLMTVtUHRReW53Um4zNUdSNmZXc1dDbFFWeDVra0U1RFA2ZWszbFRIZnZHN0Z4clJ4Q1NYbGRSYkRhSzZ3WWViCis0ZGRVVy9ubkF3M2JMMUs2aDhtaTVVMDNqSUpYbS9hYll1Q0VQVmkvM0NhSlZjYXVhOGFhYkpva0oxTlpxYk4KYkN2MDJGbHhIcEpRRys5T0V1UlUzN25PRTR1SzJFQlFDb3NpMUQ1Uy9vWGFtTVdSTXE1Uy9NYUsvdTh1UHZpbgpqMmxlTndyM2g4a09DYnU4L0dTQkpYd2JjQm9zeHdJREFRQUJBb0lDQUM5dHRaVXJoZ1MxdFJ6VURSb01sMC95CnIxTU16ZC9rQlVIbEFQWHlnV2k3dnh4NTluSWhHVXBqbmYvTzlGOEN6Zms0YzFFSXd3YzREcFc3d3lHL3RWRUsKRGt6eHc0NmVQb0lDYXYvTFJ5NnhlSHlBNG9SVHVQemFXVk9iT0RNYmhPUlZtYk1WdFR2eVR1bktUeGYycE9hLwo3clNKZ090RHVFQUVCSVRJL3JxT09QVWZ4a0NPN0RJRzUzU2Zka09QUkR4S1BxUmJ0VmlHMmVvVGZsaVNoSmMwCm85MG5TWjFaYUpadTZ3Sm9sdXFkRnVsL3RQcmxuTncwV1M4YlBrMmcvM2tmNkpIeE5Ka05xRFFsOE9xOWk2eS8KRTRUTGd0RGxZcitnY1dqLzNueGY4T2l2eE01b1BqeUxaeTRPZGZZU0FMQXRsUnhvYkZjZDBvV3llU1g4TzNhUApXMmhyNnAvbFQybk83ait4Mkh3Z1ZhWml4VEpNTzlhd3M3NVlCK0hKdXN0eHRYRmRVdUt1RG41UUd5WlkzblNCCjd2SUlSYk5RdW5qcmNpNGxObG1QV1owU09nQmRVM094WUkrTFRxME9EdzFyMEczbmkyTVhSNjExbGVucnNhVmwKQ1BhK1JrOStaNWVnSTlYOGtJQTFHMWZYdUM3SmN1a2xOeGl1OGhSOTR1TE04Qy9taE9WYlo0Qzd0aU03MTFOWgorbDRkTlR4L1ZWV1Z3WlVvMzVPUFlXZFU2MW81SXdrZTRLWWh5L3JUS1podkZob0oyV0ZHVzNiMm44bUlHMUFVCkl1b1F1UFhvYTZ6SGh4aGNrYU5HVXhQR1JxMFp2RDB1MFM1bDNLWEp6emJLcGo1L1k2VVc2YmJYeG9QODFLRkYKSm5hdUpTMVAyVU54NEtxbHVnUGxBb0lCQVFDL0VGVUdINXYwVWlFanlra0lXVG1SVi9lbm5HTFJneUZGSXg3Ugp6akhuck9GQVdkVXg0RUhNRWtVK3huckJkM3dwZnJhN0pGUWFKN2x2dEVST0JSc2gzN0t5VVNSRzFrdmJDMEpECkg3VE5ZMENKZFlaUGVNUlFrSnIzQUdRYm83ekcyS3R3dHpWNzQxTlhmcmFrYjltWDhDc1JjWEt6RGo2Z1M5dUkKakZQaWVOVDd3ZGc3SURTZytXb3d6WloxZnFGUjFqL0FRWFNVSktPRXhLOGwrYnhOd0lwTTYycnBXYmlFZDV2aAoxZEozeDdNQlFxQko0aWViZEhKMlNnTTZJRGFvb2NVWDJZcVp2dDlNa2QvSEx4dmhza2txMWhYcytZenZFM3NrCnlQMDM1TndDRFVVcjA2ZkhiUURIVSt1Um5XZHVwMmNxV3JiSnVkd0EwOXZGOUcvN0FvSUJBUUM5U082OVR3VlYKTXpRWC9rNEJIcFRNSUFzQjFJSENRNTV6WURFd2plQUdRMUxHUlBFUUJ0SEdtbm1XNStlU05uaWRoc0UzVDZLSApTcC9VTHNHczdzNDNpNjNTKzB4U2ZBeHVPenc5NURLSFNDKzI3Nk0xTTVJVjFwcDF4TzZON3loYVdlVVZSTEpHCjBHVGlsWjcxU3VXdWVRcXpXZWRpSHUySTNhUWwyWXpUdnNhRTRwSWFQNEh0NHUvTkg3ODNGYnNST0VhbFRvRTIKakdlUkhrcThmTHU1LzVTbmNicWRsQnlmQWxBUi95R2FxeWdWQmsyc01JYTc4THhiTzRhb2lqSElFOGlCYkZhZworTndlTHo2bzNCSlpQclFzZHRQZ0VZUTJEeW9Id0VvUmk0cTV3ODU3Z3U2VG40Ym9VZi9WV2ZIdG01ekJNQThDCjIzbFViZTJCU2dDbEFvSUJBUUNqdzY3c3dia2RzQ3VoanFnTWxOV29BM3ROV2RqRmRaelZzcVdlOVJxSFZnSDMKODBldUtXYWNNT2pUUnJJL0UxZ0VCUTFBMklHUnJZemU5dWM0N0YxMktsUHpUV05IcURSNmVtc0FON1B6KzJkOApxcFJGbCtERW9UMkNDdjdEUmhQdmFCV0NWalpzaXN1TGlodW9WQXB3bGJXRWpQWGdEWXlXUG83YnVsUElJUU9GCkNvQjVKVUNXM1ZFc3BYcWFHTURTOFUzUlR3bEtWU0VuRXFLQmJVMytZdExuM1R6VTZFY2ttNVNyL0djYXJidDcKa0F6dFp2L0YyZ2lsNVFoaEVPMW9tc2ZoaWwrbktoZ2hmRU1QYWd4KzVoNmFyY2M3U0NhSllPeEMrbGM0U2x4ZApFZHpCRlBpUkVaZ0NRYWIvTjZoSkN3bDlIeVhmUUFRWFhYL1phNHR6QW9JQkFRQ1lTaTJLc2lFZ1Eyb09ROVNPCm9nUWxsMEpEM3EzbmxtL05jLzhmaVlaTWc2MzlSMHFNRW5DRTBaUXlEYk1LdURpaXhPQi9sOXF6N3g1WW9LWEMKZFFBRlFLUkJzMTNjbjJHQTdyZXhOQUJUUjRqY0xrR3BkQ3g4MVlUQWJBbGl1S0JHMFR5MnQrYVhndU1vU2lqeQpRYWc1ajdsRVEza2VRTFBzQWljbkxMbFpRNHlGTGFWTzZQbW9ZNFY4QzZiVXN1OG5FNWdETi81TjNQa1drTUNnCmxkcVQ4MFd1MHBuS1huZ0lsdHZGSHZmeWNQSjJ0L09XTGhTNDhSOGFaL0lYZDloRm1XVWdmQUhXMFdLSUJvcnIKWU9TQ1dTaXMvWTNLSVUyMkVNMUlIelY0bUVTczRSVW4ybGdJL2JpVkFpUkxpMnBTT1hrTkZaVitQd2FISDBxUApVdkxoQW9JQkFGMExuSm5hSXBTcUt4cUpEcEE5Ny9rejdxTmlVTzFHcmVYMUs4WHVwanNFeUxqa243a0NJQjduCmpKSGllMzBrNS9oRkp4aWNvSStLM1dNaHY2Um9MWGtkOEw2NjJhQWYwN2tGZkgxTGljL2cwV2ViK3g0NHJOVmYKWlBhMTJlVVd4UlZHZFQyanovT1BadU1Ua212VW5KdU54S0FIQWNMTWtULzhVMUd2UW1aTmVacElSZDBPS1FrYQpwK3YxWGovR3ZvdUh1NDZtNWtxWVI5TS9qN1YyNTlMSXU5ZjFQd2JqZUtNV01OdGpqNGJYbEhSN1M2OElKMHV4CjV2SmNVWjdFcE40QVRRbUFkbWJmS1pLYWRsQzFuMC8rZmRrK285VXNKZjV0a2t4NGJTcXhZSTc5RW9zL0sxSlUKS21aVXBTNzJiQW1VYmRBcW9zTnUxanhiRlE1bmtZZz0KLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQo=
